<div class="form-container">
  <h2>Entrez en contact avec nous</h2>
  <p class="intro-text">
    Pour en savoir plus sur les tableaux ou pour poser n'importe quelle question, veuillez remplir le formulaire ci-dessous
  </p>

  <!-- Message de succès -->
  @if (status() === 'success') {
    <div class="feedback-message success">
      <p>Merci ! Votre message a bien été envoyé. Nous vous répondrons dans les plus brefs délais.</p>
    </div>
  }

  <!-- Message d'erreur -->
  @if (status() === 'error') {
    <div class="feedback-message error">
      <p>Désolé, une erreur est survenue. Veuillez réessayer plus tard ou nous contacter directement par email.</p>
    </div>
  }

  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()" novalidate>

      <!-- Champ Nom -->
      <div class="form-group">
        <label for="name">Votre Nom *</label>
        <input type="text" id="name" formControlName="name" placeholder="Ex: Jean Dupont" [class.is-invalid]="submitted() && f.name.errors">
        @if (submitted() && f.name.errors) {
          <div class="error-message">
            <span>Le nom est requis.</span>
          </div>
        }
      </div>

      <!-- Champ Email -->
      <div class="form-group">
        <label for="email">Votre Email *</label>
        <input type="email" id="email" formControlName="email" placeholder="Ex: jean.dupont@email.com" [class.is-invalid]="submitted() && f.email.errors">
        @if (submitted() && f.email.errors) {
          <div class="error-message">
            @if (f.email.errors['required']) { <span>L'email est requis.</span> }
            @if (f.email.errors['email']) { <span>Le format de l'email est invalide.</span> }
          </div>
        }
      </div>

      <!-- Champ Description -->
      <div class="form-group">
        <label for="description">Votre message *</label>
        <textarea id="description" formControlName="description" rows="6" placeholder="Posez toutes vos questions ici ..." [class.is-invalid]="submitted() && f.description.errors"></textarea>
        @if (submitted() && f.description.errors) {
          <div class="error-message">
            @if (f.description.errors['required']) { <span>Une description est requise.</span> }
            @if (f.description.errors['minlength']) { <span>La description doit faire au moins 20 caractères.</span> }
          </div>
        }
      </div>

    <!-- Bouton de soumission -->
      <div class="submit-container">
        @if (status() === 'loading') {
          <app-loader></app-loader>
        } @else {
          <app-button
              [text]="buttonText()"
              [type]="'submit'">
          </app-button>
        }
      </div>

  </form>

  <p class="sm m-top">* champs obligatoires</p>
</div>